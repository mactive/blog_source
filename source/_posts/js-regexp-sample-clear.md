title: JS RegExp æ­£åˆ™è¡¨è¾¾å¼-ç®€æ˜ä½¿ç”¨æŒ‡å—
date: 2016-12-27 15:23:00
author: [mac.meng]
tags: [regexp,js,code]
---

JavaScript Regular Expressions 

### æ­£åˆ™å­¦ä¹ çš„éš¾ç‚¹,è¿åç›´è§‰çš„åœ°æ–¹
1. å¤§é‡çš„ç¼©å†™, ä½ å¯ä»¥å†™ä¸€å †,ä½†ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª  ä¾‹å¦‚`\w`=`[a-zA-Z0-9_]`
2. å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ anchors,meta,quantifiers,group
3. åä¹‰è¯ä¸æ˜¯ `!`å¼€å§‹ ä¾‹å¦‚[\d]å•å­—å¿…é¡»æ˜¯æ•°å­— [^\d] å•å­ä¸æ˜¯æ•°å­—å’Œ [\D]æ˜¯ä¸€ä¸ªåŠŸèƒ½
4. groupçš„åµŒå¥—å…³ç³» \$0, \$1, \$2, \$n \$0æ˜¯æ•´ä½“(å¦‚æœå‘½ä¸­çš„è¯), \$n æ˜¯ä½ å®šä¹‰çš„ç¬¬å‡ ä¸ª`()group`
5. js çš„ RegExp æ”¯æŒçš„æ¯”è¾ƒæœ‰é™, å¾ˆå¤šæ­£åˆ™çš„é«˜çº§ç”¨æ³•å¹¶ä¸æ”¯æŒ

<!-- more -->


### jsä¸­å¦‚ä½•ä½¿ç”¨
* regex.exec // æœ€å¼ºå¤§åŠŸèƒ½æœ€å¤š
* regex.test // è¿”å›true/falseæ³¨æ„ä»–ä¼šæ”¹å˜ reg.lastIndex 
* string.match // è¿”å›å€¼æ˜¯ groupçš„æ•°ç»„, åˆ©ç”¨regexpåšå­—ç¬¦æå–
* string.replace // è¿”å› string åˆ©ç”¨regexpåšå­—ç¬¦æ›¿æ¢

VSCode, WebStorm ä¸­éƒ½å¯ä»¥ç”¨æ­£åˆ™æ¥æœç´¢äº‹åŠåŠŸå€

### æ­£åˆ™çš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ

* anchors: é”šç‚¹
* meta sequences: åŒ¹é…å­—ç¬¦ä¸²
* quantifiers: åº¦é‡  `?` `*` `+` `{n,m}`
* group: ç»„ (a|b) 
* flags/modifiers æ‰«é¢æ–¹å¼ /g å…¨å±€ /m é€è¡Œ


#### anchors

* `^` ä»¥ä»€ä¹ˆå­—ç¬¦å¼€å§‹
* `$` ä»¥ä»€ä¹ˆå­—ç¬¦ç»“æŸ
* `\b` å•è¯è¾¹ç•Œ = `(^\w|\w$|\W\w|\w\W)` (^)è¡¨ç¤ºä¸å·²xxå¼€å¤´
    * `/d\b/g` æ‰¾dè€Œä¸”dæ˜¯å•è¯çš„ç»“å°¾,ä¾‹å¦‚word, addä¸­çš„æœ€åä¸€ä¸ªd[link](https://regex101.com/r/wVAFiN/7)
* `\B` ä¸æ˜¯å•è¯çš„ç»“å°¾
    * å¯ä»¥æ˜¯å¼€å¤´æˆ–è€…ä¸­é—´   

#### meta sequences

* `.` ä»»æ„å•å­—ç¬¦
* `\s` ä»»æ„ç©ºæ ¼,tabæˆ–è€…æ¢è¡Œ \S ç›¸å
* `\d` ä»»æ„æ•°å­— \D ç›¸å
* `\w` ä»»æ„å¤§å°å†™å­—æ¯å’Œæ•°å­— \W ç›¸å
* è¿˜æœ‰ä¸€äº›hexå’Œè½¬ä¹‰å­—ç¬¦ ä¾‹å¦‚ \/\/ åŒ…å« '//' åŒæ–œçº¿

#### quantifiers
åº¦é‡ä¸€å®šéƒ½è·Ÿåœ¨ meta åé¢

* `?` 0 - 1
* `*` 0 - non-limit 
* `+` 1 - non-limit
* `{n}` nä¸ª ä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘
* `{n,m}` n - m ä¸ª, nå¿…å¡«,å¯ä»¥æ˜¯0, må¯ä»¥ä¸å†™,é»˜è®¤ non-limit


#### group
ä½ å¯ä»¥çš„å®šä¹‰å¾ˆå¤šç»„, ä½†æ˜¯å¯ä»¥æ•è·çš„ç»„æœ€å¤š9ä¸ª \$1 - \$9. \$0æ˜¯ä¸ªé»˜è®¤çš„å…¨éƒ¨å­—ç¬¦å˜é‡çš„ç»„

**string.match ä¾‹å­**

```javascript
var str = 'For more information, see Chapter 3.4.5.1';
var re = /see (chapter \d+(\.\d)*)/i;
var found = str.match(re);
// found is a array [$0, $1, $2]
```

**string.replace ä¾‹å­**

```javascript
var str = `800-456-7890
555-456-7890
4564567890`;

var regex = /(\d{3})[\s-]?(\d{3})[\s-]?(\d{4})/g;
var str = str.replace(regex, "area code: $1");
console.log(str);
```

#### flags
è¡¨è¾¾å¼æœ€å /g, /m, /gi, /gu å¯ä»¥ç»„åˆä½¿ç”¨
* `g` global,å…¨å±€ä¼šæœç´¢å¤šè¡Œæ–‡æœ¬
* `m` multiline æ¯ä¸€è¡Œå•ç‹¬æ‰§è¡Œæ­£åˆ™åŒ¹é…
* `i` case insensitive å¿½ç•¥å¤§å°å†™
* `y` sticky ç”¨çš„ä¸å¤š
* `u` æ”¯æŒunicodeå­—ç¬¦ ä¾‹: `/ğŒ†/u`

### å‚è€ƒç½‘ç«™

è¿™ä¸ª[ç½‘ç«™](https://regex101.com)æœ‰4ç§è¯­è¨€çš„æ­£åˆ™å†™æ³•, æœ‰æ­£åˆ™è¯­æ³•é«˜äº®æ˜¾ç¤º, æœ‰groupçš„æ˜¾ç¤º, å’Œä¸€äº›å¸¸ç”¨ç”¨æ³•è¿˜æœ‰library

ä¸€äº›ç»ƒä¹ ç¤ºä¾‹ 
https://regex101.com/r/wVAFiN/3
https://regex101.com/r/wVAFiN/2



